{% extends "base.html" %}
{% load static %}
{% block content %}
{% load tags %}
<!-- Title page -->
	<section class="bg-img1 txt-center p-lr-15 p-tb-92" style="background-image: url({{seccion.imagen}});">
		<h2 class="ltext-105 cl0 txt-center">
			{{seccion.titulo}}
		</h2>
	</section>				

	<!-- Shoping Cart -->
	<form action="/modificardatos/" method="POST" class="bg0 p-t-75 p-b-85">
		{% csrf_token %}
		<div class="container">
			<div class="row">

				<div class="col-sm-12 ">
					<div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
						<h4 class="mtext-109 cl2 p-b-30">
							Datos de Usuario
						</h4>

						

						
							
							<div class="row">

									
									<div id="ingdatosenvio" class="col-sm-12">
										<div class="row">
											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Usuario:
													</span>
												</div>
												<input required value="{{request.user.username}}" class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="nombrerev" placeholder="Usuario">
											</div>
											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Nombre:
													</span>
												</div>
												<input required value="{{request.user.first_name}}" class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="nombre" placeholder="Nombre">
											</div>

											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Apellido:
													</span>
												</div>
												<input required value="{{request.user.last_name}}" class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="apellido" placeholder="Apellido">
											</div>

											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Email:
													</span>
												</div>
												<input required value="{{request.user.email}}" class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="email" placeholder="Email">
											</div>
											
											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Teléfono:
													</span>
												</div>
												<input required value="{%if datos.telefono != 'null'%}{{datos.telefono}}{%endif%}" class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="telefono" placeholder="Numero de teléfono">
											</div>

											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Código Postal:
													</span>
												</div>
												<input required value="{%if datos.codigopostal != 'null'%}{{datos.codigopostal}}{%endif%}" class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="codigo" placeholder="Código Postal" id="codigo_postal">
											</div>
											
											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Colonia:
													</span>
												</div>
												<select value=""  id="colonia" class="stext-111 cl8 plh3 size-111 p-lr-15" name="colonia">
													<option disabled value='Seleccione una opción'>Seleccione una opcion</option>
													{% for colonia in colonias.colonias %}
													<option {%if datos.colonia == colonia %}selected{%endif%} value='{{colonia}}'>{{colonia}}</option>
													{% endfor %}
												</select>
											</div>

											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Calle:
													</span>
												</div>
												<input id="direccion"  class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="calle" placeholder="Calle" value="{%if datos.calle != 'null'%}{{datos.calle}}{%endif%}">
											</div>

											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														No. Exterior:
													</span>
												</div>
												<input id="exterior"  class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="exterior" placeholder="No. Exterior" value="{%if datos.no_exterior != 'null'%}{{datos.no_exterior}}{%endif%}">
											</div>
											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														No. Interior (Opcional):
													</span>
												</div>
												<input id="interior"  class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="interior" placeholder="No. Interior" value="{%if datos.no_interior != 'null'%}{{datos.no_interior}}{%endif%}">
											</div>
											
											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														País:
													</span>
												</div>
												<input  readonly="" id="pais" class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="pais" placeholder="País" value="México">
											</div>

											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Estado:
													</span>
												</div>
												<input readonly="" id="estado" class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="estado" placeholder="Estado" value="{%if datos.estado != 'null'%}{{datos.estado}}{%endif%}">
											</div>

											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Ciudad:
													</span>
												</div>
												<input readonly="" id="ciudad" class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="ciudad" placeholder="Ciudad" value="{%if datos.ciudad != 'null'%}{{datos.ciudad}}{%endif%}">
											</div>
											
										</div>
										
									</div>
										
								
							</div>

						<button class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer">
							Modificar Datos
						</button>
					</div>
				</div>
			</div>
		</div>
	</form>


	<!-- Shoping Cart -->
	<form action="/modificarcontraseña/" method="POST" class="bg0 p-t-75 p-b-85">
		{% csrf_token %}
		<div class="container">
			<div class="row">

				<div class="col-sm-12 ">
					<div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
						<h4 class="mtext-109 cl2 p-b-30">
							Modificar contraseña
						</h4>

						

						
							
							<div class="row">

									
									<div id="ingdatosenvio" class="col-sm-12">
										<div class="row">
											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Antigua Contraseña:
													</span>
												</div>
												<input class="stext-111 cl8 plh3 size-111 p-lr-15" type="password" name="viejacontraseña" placeholder="Antigua Contraseña">
											</div>
											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Nueva Contraseña:
													</span>
												</div>
												<input class="stext-111 cl8 plh3 size-111 p-lr-15" type="password" name="nuevacontraseña" placeholder="Nueva Contraseña">
											</div>

											<div class="bor8 bg0 m-b-12 col-md-4">
												<div class="w-full-ssm">
													<span class="stext-110 cl2">
														Repetir nueva contraseña:
													</span>
												</div>
												<input class="stext-111 cl8 plh3 size-111 p-lr-15" type="password" name="recontraseña" placeholder="Repetir nueva contraseña">
											</div>
										</div>
										
									</div>
										
								
							</div>

						<button class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer">
							Modificar Contraseña
						</button>
					</div>
				</div>
			</div>
		</div>
	</form>
		
	
		

{% endblock %}

{% block js %}
<script type="text/javascript">
	
	$("#codigo_postal").on("input",function(event) {
	codigo = $(this).val();
	$.ajax({
		             url : 'https://api-codigos-postales.herokuapp.com/v2/codigo_postal/'+codigo, // the endpoint,commonly same url
		             type : "GET", // http method
		             data : {}, // data sent with the post request
		     success : function(json) {
		     	console.log(json)
		     	$("#ciudad").val(json.municipio);
		     	$("#estado").val(json.estado);
		     	valores = "<option disabled selected value='Seleccione una opción'>Seleccione una opcion</option>"
		     	$.each(json.colonias, function(index, val) {
		     		valores += "<option value='"+val+"'>"+val+"</option>";
		     	});
		     	$("#colonia").html(valores);
		     }
		 });
});

</script>
{% endblock %}